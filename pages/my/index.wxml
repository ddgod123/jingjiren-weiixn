<t-toast id="t-toast" />

<view class="my">
  <image class="nav-bg" src="/static/bg_navbar.png" />
  <nav title-text="ÊàëÁöÑ" />
  <view class="my-info">
    <t-cell-group>
      <!-- Â∑≤ÁôªÂΩïÁî®Êà∑‰ø°ÊÅØ -->
      <t-cell wx:if="{{isLoggedIn}}" bordered="{{false}}">
        <t-avatar 
          image="{{userInfo.avatarUrl}}" 
          alt="{{userInfo.nickName}}"
          slot="left-icon" 
          size="large" 
          shape="circle"
          class="user-avatar"
        />
        <view class="my-info__person" slot="description">
          <view class="name">{{userInfo.nickName || 'ÂæÆ‰ø°Áî®Êà∑'}}</view>
          <view class="user-details">
            <text class="user-gender" wx:if="{{userInfo.genderText}}">
              {{userInfo.genderText}}
            </text>
            <text class="user-location" wx:if="{{userInfo.locationText}}">
              üìç {{userInfo.locationText}}
            </text>
            <text class="user-id" wx:if="{{userInfo.openid}}">
              ID: {{userInfo.openid.substring(0, 12)}}...
            </text>
          </view>
          <view class="tags">
            <t-tag class="tag" variant="light" icon="user-check" theme="success">{{userInfo.userTag}}</t-tag>
            <t-tag class="tag" variant="light" icon="logo-wechat" theme="{{userInfo.loginType === 'mock_wechat' ? 'warning' : 'primary'}}">
              {{userInfo.loginTypeText}}
            </t-tag>
            <t-tag class="tag" variant="light" icon="time" wx:if="{{lastLoginTime}}">{{lastLoginTime}}</t-tag>
          </view>
        </view>
        <t-icon slot="right-icon" name="edit" size="40rpx" color="#000000e6" bindtap="onEditProfile" />
      </t-cell>
      
      <!-- Êú™ÁôªÂΩïÁä∂ÊÄÅ -->
      <t-cell
        wx:if="{{!isLoggedIn}}"
        title="ÁÇπÂáªÁôªÂΩïËé∑ÂèñÂÆåÊï¥ÂäüËÉΩ"
        note="‰ΩøÁî®ÂæÆ‰ø°Âø´ÈÄüÁôªÂΩï"
        bordered="{{false}}"
        t-class-title="cell-class-title"
        t-class-center="cell-class-center"
        bindtap="onLogin"
      >
        <t-avatar slot="left-icon" icon="user" size="128rpx" class="default-avatar" />
        <t-icon slot="right-icon" name="chevron-right" size="32rpx" color="#0052D9" />
      </t-cell>
    </t-cell-group>
    <t-divider t-class="divider-class" />
    <t-grid t-class="grid-class">
      <t-grid-item
        wx:for="{{gridList}}"
        wx:for-item="gridItem"
        wx:key="type"
        text="{{gridItem.name}}"
        icon="{{gridItem.icon}}"
        class="grid-item {{gridItem.type === 'all' ? 'split-line' : ''}}"
        data-data="{{gridItem}}"
        bindclick="onEleClick"
      />
    </t-grid>
  </view>

  <view class="my-service">
    <view class="my-service--tips">Êé®ËçêÊúçÂä°</view>
    <t-grid column="{{4}}" class="my-service__list">
      <t-grid-item
        class="my-service__list-item"
        wx:for="{{service}}"
        wx:key="item"
        text="{{item.name}}"
        image="{{item.image}}"
        url="{{item.url}}"
        data-data="{{item}}"
        bindclick="onEleClick"
      />
    </t-grid>
  </view>

  <t-cell-group theme="card">
    <t-cell
      wx:for="{{settingList}}"
      wx:for-item="item"
      wx:key="type"
      title="{{item.name}}"
      url="{{item.url}}"
      leftIcon="{{item.icon}}"
      hover
      arrow
      data-data="{{item}}"
      bindclick="onEleClick"
    />
    <!-- ÈÄÄÂá∫ÁôªÂΩïÊåâÈíÆÔºàÂè™Âú®Â∑≤ÁôªÂΩïÊó∂ÊòæÁ§∫Ôºâ -->
    <t-cell
      wx:if="{{isLoggedIn}}"
      title="ÈÄÄÂá∫ÁôªÂΩï"
      leftIcon="logout"
      hover
      arrow
      bindclick="onLogout"
      t-class-title="logout-title"
    />
  </t-cell-group>
</view>
